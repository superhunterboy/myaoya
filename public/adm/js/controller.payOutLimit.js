app.controller("editpayOutLimit",["$scope","http",function(t,i){t.limit={},t.levels=[],t.ngDialogData.limit&&(t.id=t.ngDialogData.limit.id,t.limit.id=t.ngDialogData.limit.id,t.limit.count=t.ngDialogData.limit.count,t.ngDialogData.limit.level_ids.length>0&&(t.ngDialogData.limit.level_ids.forEach(function(i){t.levels.push(i),console.log(i)}),console.log(t.levels))),i.get("/admin/getAvailableMemberLevels",{id:t.id},function(i){t.levelList=i,t.levels.length>0&&t.levelList.forEach(function(i){i.checked=t.levels.indexOf(i.id+"")>-1})}),t.getLevelIds=function(){var i=[];return t.levelList.forEach(function(t){t.checked&&i.push(t.id)}),i.join(",")},t.check=function(){return t.limit.levelIds=t.getLevelIds(),!!t.limit.levelIds||(t.error=!0,t.errorMsg="请选择层级",!1)},t.sub=function(){var e;e=t.id?"/admin/editPayOutLimit/"+t.id:"/admin/addPayOutLimit",!t.loading&&t.check()&&(t.loading=!0,i.post(e,t.limit,function(i){t.loading=!1,0==i.status?t.closeThisDialog(i):(t.error=!0,t.errorMsg=i.msg)}))}}]),app.controller("payOutLimit",["$scope","$rootScope","Table","http","ngDialog",function(t,i,e,l,n){t.table=e.init({link:"/admin/getPayOutLimit"}),t.table.getList(),t.delLimit=function(i,e){n.open({template:'<div class="confirm-dialog">                 <h2>确定要删除此列表信息？</h2>                <div align="center">                    <button type="button" class="btn btn-red" ng-click="closeThisDialog(\'CONFIRM\')">确定</button>                    <button type="button" class="btn btn-default" ng-click="closeThisDialog()">取消</button>                </div></div>',plain:!0}).closePromise.then(function(e){e.value&&"CONFIRM"==e.value&&l.get("/admin/deletePayOutLimit/"+i.id,{},function(i){0==i.status&&t.table.getList()})})},t.editLimit=function(i){n.open({template:"template/payOutLimitDialog.html",controller:"editpayOutLimit",data:{limit:i}}).closePromise.then(function(i){i.value&&0==i.value.status&&t.table.getList()})}}]);